
<div class="page-head">
  <div class="page-title">
    <h1><span class="glyphicon glyphicon-shopping-cart"></span>
      商户信息
      <!--<small>dashboard &amp; statistics</small>-->
    </h1>
  </div>
  <div class="page-toolbar">
    <div class="pull-right tooltips" >
      <a href="javascript:;" class="btn btn-danger">
        <i class="glyphicon glyphicon-plus"></i> 新增
      </a>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-xs-12">
    <form class="form-inline">
      <div class="form-group">
        <div class="input-group">
          <div class="search-line">
            <input type="text" class="form-control" name="markt" [(ngModel)]="qry.market" placeholder="市场名称">
            <input type="text" class="form-control" name="shop"  [(ngModel)]="qry.shop" placeholder="商户名称">
            <input type="text" class="form-control" name="stall"  [(ngModel)]="qry.stall" placeholder="摊位编号">
            <input type="text" class="form-control" name="state"  [(ngModel)]="qry.state" placeholder="状态">
          </div>
        </div>
      </div>
      <button type="submit" class="btn btn-primary" (click)="query()">查询</button>
      <button type="submit" class="btn btn-primary" (click)="reset()">重置</button>
    </form>
  </div>
</div>
<div class="row">
  <div class="col-xs-12">
    <ngx-datatable
      #mydatatable
      class="material"
      [headerHeight]="50"
      [footerHeight]="50"
      [limit]="page?.pageSize"
      [columnMode]="'force'"
      [rowHeight]="'auto'"
      [externalPaging]="true"
      [count]="page?.totalCount"
      [offset]="page?.pageNo-1"
      [rows]="page?.items"
      (page)='setPage($event)'
    >
      <ngx-datatable-column name="商户" prop="name"></ngx-datatable-column>
      <ngx-datatable-column name="市场" prop="market_name"></ngx-datatable-column>
      <ngx-datatable-column name="摊位" prop="stall_name"></ngx-datatable-column>
      <ngx-datatable-column name="经营者" prop="operator_name"></ngx-datatable-column>
      <ngx-datatable-column name="功能区域" prop="func_type">
        <ng-template ngx-datatable-cell-template let-value="value">
          {{value|dictConvert:"FUNC_TYPE"}}
        </ng-template>
      </ngx-datatable-column>
      <ngx-datatable-column name="状态" prop="status" cellClass="outOfDate">
        <ng-template ngx-datatable-cell-template let-value="value">
          <div [ngClass]="{'outOfDate': value ==2}">
            {{value|dictConvert:"SHOP_STATUS"}}
          </div>
        </ng-template>
      </ngx-datatable-column>
      <ngx-datatable-column name="操作" prop="id">
        <ng-template ngx-datatable-cell-template let-value="value" let-row="shop">
          <a routerLink="/manage/shopForm/{{value}}">修改</a>
        </ng-template>
      </ngx-datatable-column>
    </ngx-datatable>
  </div>
</div>

